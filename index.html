<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>3-Phase Circuit Control</title>
<style>
body {
font-family: Arial, sans-serif;
text-align: center;
padding: 20px;
background-color: #f0f0f0;
}
h2 {
color: #333;
}
.button-grid {
display: grid;
grid-template-columns: repeat(3, 120px);
gap: 15px;
justify-content: center;
margin-top: 30px;
}
.phase-button {
padding: 15px;
font-size: 16px;
border: none;
border-radius: 8px;
cursor: pointer;
color: white;
}
.red {
background-color: #e74c3c;
}
.yellow {
background-color: #f1c40f;
color: black;
}
.green {
background-color: #2ecc71;
}
</style>
</head>
<body>

<h2>3-Phase Circuit Control Panel</h2>

<div class="button-grid">
<button class="phase-button red" onclick="sendToGitHub('Red Phase Switch 1 ON')">Red 1</button>
<button class="phase-button red" onclick="sendToGitHub('Red Phase Switch 2 ON')">Red 2</button>
<button class="phase-button red" onclick="sendToGitHub('Red Phase Switch 3 ON')">Red 3</button>

<button class="phase-button yellow" onclick="sendToGitHub('Yellow Phase Switch 1 ON')">Yellow 1</button>
<button class="phase-button yellow" onclick="sendToGitHub('Yellow Phase Switch 2 ON')">Yellow 2</button>
<button class="phase-button yellow" onclick="sendToGitHub('Yellow Phase Switch 3 ON')">Yellow 3</button>

<button class="phase-button green" onclick="sendToGitHub('Green Phase Switch 1 ON')">Green 1</button>
<button class="phase-button green" onclick="sendToGitHub('Green Phase Switch 2 ON')">Green 2</button>
<button class="phase-button green" onclick="sendToGitHub('Green Phase Switch 3 ON')">Green 3</button>
</div>

<script>
async function sendToGitHub(message) {
const token = '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';
const repo = 'Abhi-byte-nsut/BTP';
const path = 'message.txt';
const url = `https://api.github.com/repos/${repo}/contents/${path}`;

try {
const res = await fetch(url, {
headers: {
Authorization: `token ${token}`,
Accept: 'application/vnd.github.v3+json'
}
});

const data = await res.json();
const sha = data.sha;
const current = atob(data.content || '');
const updated = `${message} - ${new Date().toLocaleString()}\n${current}`;

const result = await fetch(url, {
method: 'PUT',
headers: {
Authorization: `token ${token}`,
Accept: 'application/vnd.github.v3+json'
},
body: JSON.stringify({
message: `Update: ${message}`,
content: btoa(updated),
sha: sha
})
});

if (result.ok) {
alert('Message sent to GitHub!');
} else {
alert('Failed to update GitHub: ' + (await result.text()));
}
} catch (err) {
console.error(err);
alert('Error: ' + err.message);
}
}
</script>

</body>
</html>

